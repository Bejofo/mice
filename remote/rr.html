<div id="dab">n</div>
<script src="ably.js"></script>
<script>
   
function parse(str){
	var e = str.split("");
	var i = 0;
	var ai = 0;
	var results = [""];
	while (i <= e.length-1){
		if (e[i] == "\\" ){
			results[ai] += (e[i+1])
			i += 2;
			continue;
		}
		if (e[i] == ","){
			ai += 1;
			results[ai]="";
			i++;
			continue
		}
		results[ai] += e[i];
		i++;
	}
	return  {c:results[0], p:results.slice(1)};
}
   
function wait(ms){
   var start = new Date().getTime();
   var end = start;
   while(end < start + ms) {
     end = new Date().getTime();
  }
}
var realtime = new Ably.Realtime("8tpiVA.qwd5Xw:gx-0R-H3XNqWLt_D");
    var channel = realtime.channels.get("rr");
    channel.subscribe(function(msg) {
      if (msg.data == "exit"){
         document.getElementById("dab").innerHTML = msg.data;
         wait(1000);
         window.close();
      }
      document.getElementById("dab").innerHTML = msg.data;
      wait(1000); 
    });
</script>
