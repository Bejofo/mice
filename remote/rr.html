<div id="dab">n</div>
<script src="ably.js"></script>
<script>
function wait(ms){
   var start = new Date().getTime();
   var end = start;
   while(end < start + ms) {
     end = new Date().getTime();
  }
}
var realtime = new Ably.Realtime("8tpiVA.qwd5Xw:gx-0R-H3XNqWLt_D");
    var channel = realtime.channels.get("rr");
    channel.subscribe(function(msg) {
      if (msg.data == "exit"){
         wait(1000);
         window.close();
      }
      document.getElementById("dab").innerHTML = msg.data;
      wait(1000); 
    });
</script>
